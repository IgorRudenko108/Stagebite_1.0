(()=>{"use strict";!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();const e=document.querySelector(".menu__icon"),t=document.querySelector(".menu__body"),o=document.querySelector(".menu__link");e&&e.addEventListener("click",(function(o){document.body.classList.toggle("_lock"),e.classList.toggle("_active"),t.classList.toggle("_active")}));const n=document.querySelectorAll(".menu__link");if(n.length>0){function l(n){e.classList.contains("_active")&&(document.body.classList.remove("_lock"),e.classList.remove("_active"),t.classList.remove("_active"),o.classList.toggle("_active"))}n.forEach((e=>{e.addEventListener("click",l)}))}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function o(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function n(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(async function(s){s.preventDefault();let c=function(e){let s=0,c=document.querySelectorAll("._req");for(let e=0;e<c.length;e++){const i=c[e];o(i),i.classList.contains("_email")?n(i)&&(t(i),s++):("checkbox"===i.getAttribute("type")&&!1===i.checked||""===i.value)&&(t(i),s++)}return s}(),i=new FormData(e);if(i.append("image",formImage.files[0]),0===c){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:i});if(t.ok){let o=await t.json();alert(o.message),formPreview.innerHTML="",e.reset(),e.classList.remove("_sending")}else alert("Ошибка"),e.classList.remove("_sending")}else alert("Заполните обязательные поля")}))}));const s=document.querySelectorAll(".menu__link[data-goto]");if(s.length>0){function a(o){const n=o.target;if(n.dataset.goto&&document.querySelector(n.dataset.goto)){const s=document.querySelector(n.dataset.goto).getBoundingClientRect().top+pageYOffset-document.querySelector("header").offsetHeight;e.classList.contains("_active")&&(document.body.classList.remove("_lock"),e.classList.remove("_active"),t.classList.remove("_active")),window.scrollTo({top:s,behavior:"smooth"}),o.preventDefault()}}s.forEach((e=>{e.addEventListener("click",a)}))}const c=document.querySelector(".header");window.addEventListener("scroll",(function(){window.scrollY>50?c.classList.add("_color"):window.scrollY<50&&c.classList.remove("_color")}));const i=document.querySelectorAll("._anim-items");if(i.length>0){function r(){for(let e=0;e<i.length;e++){const t=i[e],o=t.offsetHeight,n=d(t).top,s=4;let c=window.innerHeight-o/s;o>window.innerHeight&&(c=window.innerHeight-window.innerHeight/s),pageYOffset>n-c&&pageYOffset<n+o?t.classList.add("_active"):t.classList.contains("_anim-no-hide")||t.classList.remove("_active")}}function d(e){const t=e.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+n,left:t.left+o}}window.addEventListener("scroll",r),setTimeout((()=>{r()}),300)}})();